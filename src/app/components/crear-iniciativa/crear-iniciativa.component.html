<form #form="ngForm" (ngSubmit)="guardarIniciativa(form)">
    <div class="row g-3 p-4">
        <!-- Columna para los inputs -->
        <app-navbar-form-crear (tabChange)="onTabChange($event)"></app-navbar-form-crear>

        <div class="col-8">
            <div *ngIf="selectedTab === 'iniciativas'">
                <!-- Solo visible si 'Iniciativas' está seleccionado -->
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label>Tipo del Proyecto</label>
                            <input [(ngModel)]="titulo" name="titulo" type="text" class="form-control"
                                placeholder="Investigación sobre IA" id="tipo">
                        </div>
                        <div class="mb-3">
                            <label>Nombre del Proyecto</label>
                            <input [(ngModel)]="nombre" name="nombre" type="text" class="form-control"
                                placeholder="IA en educación" id="nombre">
                        </div>
                        <div class="mb-3">
                            <label for="fecha" class="form-label">Fecha Inicio:</label>
                            <input [(ngModel)]="fechaInicio" name="fechaInicio" type="date" id="fecha"
                                class="form-control">
                        </div>
                        <div class="mb-3">
                            <label for="fecha" class="form-label">Fecha Fin:</label>
                            <input [(ngModel)]="fechaFin" name="fechaFin" type="date" id="fecha" class="form-control">
                        </div>
                        <div class="mb-3">
                            <label for="horas">Horas</label>
                            <input [(ngModel)]="horas" name="horas" type="number"
                                class="form-control form-control-sm w-auto" placeholder="Horas" id="horas" min="0"
                                step="1" max="999" />
                        </div>
                        <div class="mb-3">
                            <label>Imagen</label>
                            <input [(ngModel)]="imagen" name="imagen" type="text" class="form-control"
                                placeholder="IA en educación" id="imagen">
                        </div>
                        <button class="btn btn-info me-2" type="button" (click)="onImageChange()">Cargar Imagen</button>
                    </div>

                    <div class="col-md-6">
                        
                        <div class="mb-3">
                            <label for="producto">Producto Final</label>
                            <textarea [(ngModel)]="producto" name="producto" class="form-control"
                                      placeholder="Informe de IA" id="producto" rows="4"></textarea>
                        </div>                        


                        <div class="image-box">
                            <img id="imagenForm" src="/Ods_img/ods1.png" alt="Descripción de la imagen" />
                        </div>
                    </div>
                </div>
            </div>
            <!-- En tu formulario, agrega un select para elegir un ODS -->
            <div *ngIf="selectedTab === 'metas'">
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label>Descripción del Proyecto</label>
                            <input [(ngModel)]="descripcion" name="descripcion" type="text" class="form-control"
                                placeholder="Fomentar la educación digital" id="tipo">
                        </div>

                        <!-- Select para elegir un ODS -->
                        <div class="mb-3">
                            <label>Seleccionar ODS</label>
                            <select [(ngModel)]="ods.id" name="ods" class="form-control">
                                <option value="" disabled selected>Selecciona un ODS</option>
                                <!-- Recorremos la lista de ODS y mostramos cada uno -->
                                <option *ngFor="let item of odsList" [value]="item.id">
                                    {{ item.id }} - {{ item.nombre }}
                                </option>
                            </select>
                        </div>

                        <!-- Botón para agregar el ODS seleccionado -->
                        <button class="btn btn-info" type="button" (click)="anyadirOds()">Añadir ODS</button>
                    </div>

                    <!-- Aquí es donde movemos la imagen box a la derecha -->
                    <div class="col-md-6">
                        <div class="image-box">
                            <!-- Mostrar el título solo si no hay imágenes seleccionadas -->
                            <h5 *ngIf="!odsSeleccionados || odsSeleccionados.length === 0">Ods Seleccionados</h5>
                    
                            <div class="row">
                                <!-- Iterar sobre las imágenes ordenadas por id -->
                                <div *ngFor="let item of odsSeleccionados; let i = index" class="col-md-2">
                                    <img *ngIf="item.id" 
                                        [src]="'./Ods_img/ods' + item.id + '.png'"
                                        alt="{{ item.nombre }}" 
                                        class="img-thumbnail" 
                                        id="{{ item.id }}" 
                                        (click)="eliminarOds(i)" />  <!-- Llamar a eliminarOds con el índice -->
                                </div>
                            </div>
                        </div>
                    </div>
                    



                </div>
            </div>
            <div *ngIf="selectedTab === 'profesores'">
                <div class="row">
                    <div class="col-md-6">

                        <!-- Select para elegir un ODS -->
                        <div class="mb-3">
                            <label>Seleccionar Profesores</label>
                            <select [(ngModel)]="profesor.id" name="profe" class="form-control">
                                <option value="" disabled selected>Selecciona un ODS</option>
                                <!-- Recorremos la lista de ODS y mostramos cada uno -->
                                <option *ngFor="let item of ProfesoresList" [value]="item.id">
                                    - {{ item.nombre }}
                                </option>
                            </select>
                        </div>

                        <!-- Botón para agregar el ODS seleccionado -->
                        <button class="btn btn-info" type="button" (click)="anyadirProfesor()">Añadir Profesor</button>
                    </div>

                    <!-- Aquí es donde movemos la imagen box a la derecha -->
                    <div class="col-md-6">
                        <div class="image-box">
                            <h5>Profesores Seleccionados</h5>
                            <ul>
                                <!-- Mostramos la lista de cursos seleccionados -->
                                <li *ngFor="let item of profesoresSeleccionados; let i = index" class="mb-2">
                                    {{ item.nombre }}
                                    <!-- Botón de eliminar (X) -->
                                    <button type="button" class="btn btn-danger btn-sm ms-4" (click)="eliminarProfesor(i)">
                                        X
                                    </button>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div *ngIf="selectedTab === 'entidades'">
                <div class="row">
                    <div class="col-md-6">

                        <!-- Select para elegir un ODS -->
                        <div class="mb-3">
                            <label>Seleccionar Entidades</label>
                            <select [(ngModel)]="entidad.id" name="entidad" class="form-control">
                                <option value="" disabled selected>Selecciona un ODS</option>
                                <!-- Recorremos la lista de ODS y mostramos cada uno -->
                                <option *ngFor="let item of entidadesList" [value]="item.id">
                                    - {{ item.nombre }}
                                </option>
                            </select>
                        </div>

                        <!-- Botón para agregar el ODS seleccionado -->
                        <button class="btn btn-info" type="button" (click)="anyadirEntidad()">Añadir Profesor</button>
                    </div>

                    <!-- Aquí es donde movemos la imagen box a la derecha -->
                    <div class="col-md-6">
                        <div class="image-box">
                            <h5>Profesores Seleccionados</h5>
                            <ul>
                                <!-- Mostramos la lista de cursos seleccionados -->
                                <li *ngFor="let item of entidadesSeleccionados; let i = index" class="mb-2">
                                    {{ item.nombre }}
                                    <!-- Botón de eliminar (X) -->
                                    <button type="button" class="btn btn-danger btn-sm ms-4" (click)="eliminarEntidad(i)">
                                        X
                                    </button>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div *ngIf="selectedTab === 'modulos'">
                <!-- Solo visible si 'Módulos' está seleccionado -->
                <div class="row">
                    <div class="col-md-6">
            
                        <!-- Select para elegir un ODS -->
                        <div class="mb-3">
                            <label>Seleccionar Cursos</label>
                            <select [(ngModel)]="curso.id" name="cursos" class="form-control">
                                <option value="" disabled selected>Selecciona un ODS</option>
                                <!-- Recorremos la lista de ODS y mostramos cada uno -->
                                <option *ngFor="let item of cursoList" [value]="item.id">
                                    - {{ item.nombre }}
                                </option>
                            </select>
                        </div>
            
                        <!-- Botón para agregar el ODS seleccionado -->
                        <button class="btn btn-info mt-2" type="button" (click)="anyadirCurso()">Seleccionar Curso</button>
                    </div>
            
                    <!-- Aquí es donde movemos la imagen box a la derecha -->
                    <div class="col-md-6">
                        <div class="image-box">
                            <h5>Cursos Seleccionados</h5>
                            <ul>
                                <!-- Mostramos la lista de cursos seleccionados -->
                                <li *ngFor="let item of cursosSeleccionados; let i = index" class="mb-2">
                                    {{ item.nombre }}
                                    <!-- Botón de eliminar (X) -->
                                    <button type="button" class="btn btn-danger btn-sm ms-4" (click)="eliminarCurso(i)">
                                        X
                                    </button>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>




        <!--<div class="col-4 d-flex flex-column">
        <label>Iniciativa</label>
        <textarea class="form-control" placeholder="Todas las Iniciativas Ordenadas" rows="3" disabled></textarea>
        <button class="btn btn-danger mt-2">Borrar</button>
  
        <label>Modulos</label>
        <textarea class="form-control" placeholder="Todos los Modulos Ordenados" rows="3" disabled></textarea>
        <button class="btn btn-danger mt-2">Borrar</button>
  
        <label>Metas</label>
        <textarea class="form-control" placeholder="Todas las Metas Ordenadas" rows="3" disabled></textarea>
        <button class="btn btn-danger mt-2">Borrar</button>
      </div>
  
      <!-- Última fila con dos columnas 
      <div class="row mt-4">
        <div class="col-md-6 d-flex justify-content-center align-items-center" style="height: 100%; padding-right: 0;">
          <label class="text-center mb-0">Producto final</label>
        </div>
        <div class="col-md-6 d-flex justify-content-center align-items-center" style="height: 100%; padding-left: 0;">
          <textarea class="form-control text-center" rows="4" style="width: 100%;"></textarea>
        </div>
      </div> 
     Columna para los textarea "Todas las Metas Ordenadas" -->


        <!-- Botones de Crear y Cancelar -->
        <div class="d-flex justify-content-end mt-3">
            <button class="btn btn-danger me-2" type="button" (click)="clearForm(form)">Cancelar</button>
            <button class="btn btn-success" type="submit">Crear</button>
        </div>
    </div>
</form>