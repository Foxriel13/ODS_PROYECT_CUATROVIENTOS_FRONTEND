<!--Por año escolar y filtrado-->
<!--Cada año hay un indicador diferente. Simplemente hacer las consultas con iniciativas que coincidan con el año filtrado-->
<div class="d-flex flex-column mt-2 mb-0">
    <label class="form-label m-4 mb-0">Año lectivo</label>
    <select class="form-select form-select-sm m-4 mt-0 w-25" title="anyo_seleccionado" [(ngModel)]="anyo_seleccionado"
        (change)="filterChanges()">
        @for (anyo of anyos_lectivos; track $index) {
        <option [value]="anyo">{{anyo}}</option>
        }
    </select>
    <h1 class="text-center">Indicadores del curso:</h1>
    <h1 class="text-center">{{anyo_seleccionado}}</h1>
</div>

<div class="row p-3 mb-3">
    <!--Columna 1-->
    <div class="col-md-4 col-xl-3 col-xxl-3 col-sm-4 col-lg-4 mb-3">
        <div class="card p-4 h-100" data-bs-toggle="modal" data-bs-target="#indicador1" (click)="chartIndicador1()">
            <div class="card-header text-white">
                <h5 class="card-title">Indicador 1</h5>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Qué iniciativas se han realizado dirigidas a los ODS por curso académico
                </p>
            </div>
        </div>
    </div>

    <div class="col-md-4 col-xl-3 col-xxl-3 col-sm-4 col-lg-4 mb-3">
        <div class="card p-4 h-100" data-bs-toggle="modal" data-bs-target="#indicador2">
            <div class="card-header text-white">
                <h5 class="card-title">Indicador 2</h5>
            </div>
            <div class="card-body">
                <p class="card-text">Cantidad de iniciativas</p>
            </div>
        </div>
    </div>

    <div class="col-md-4 col-xl-3 col-xxl-3 col-sm-4 col-lg-4 mb-3">
        <div class="card p-4 h-100" data-bs-toggle="modal" data-bs-target="#indicador3" (click)="chartIndicador3()">
            <div class="card-header text-white">
                <h5 class="card-title">Indicador 3</h5>
            </div>
            <div class="card-body">
                <p class="card-text">
                    CANTIDAD DE INICIATIVAS
                </p>
            </div>
        </div>
    </div>
    <div class="col-md-4 col-xl-3 col-xxl-3 col-sm-4 col-lg-4 mb-3">
        <div class="card p-4 h-100" data-bs-toggle="modal" data-bs-target="#indicador4">
            <div class="card-header text-white">
                <h5 class="card-title">Indicador 4</h5>
            </div>
            <div class="card-body">
                <p class="card-text">
                    En qué consiste cada acción, proyecto, iniciativa y si hay un producto final
                </p>
            </div>
        </div>
    </div>

    <div class="col-md-4 col-xl-3 col-xxl-3 col-sm-4 col-lg-4 mb-3">
        <div class="card p-4 h-100" data-bs-toggle="modal" data-bs-target="#indicador5">
            <div class="card-header text-white">
                <h5 class="card-title">Indicador 5</h5>
            </div>
            <div class="card-body">
                <p class="card-text">
                    A qué ODS va dirigida cada acción y dentro de cada ODS a qué metas concretas
                </p>
            </div>
        </div>
    </div>

    <!--Columna 2-->
    <!--?-->
    <div class="col-md-4 col-xl-3 col-xxl-3 col-sm-4 col-lg-4 mb-3">
        <div class="card p-4 h-100" data-bs-toggle="modal" data-bs-target="#indicador6" (click)="reiniciarChart()">
            <div class="card-header text-white">
                <h5 class="card-title">Indicador 6</h5>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Si en la realización del proyecto, acción ha colaborado alguna entidad externa
                </p>
            </div>
        </div>
    </div>
    <div class="col-md-4 col-xl-3 col-xxl-3 col-sm-4 col-lg-4 mb-3">
        <div class="card p-4 h-100" data-bs-toggle="modal" data-bs-target="#indicador7">
            <div class="card-header text-white">
                <h5 class="card-title">Indicador 7</h5>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Si las acciones, proyectos se han difundido
                </p>
            </div>
        </div>
    </div>
    <div class="col-md-4 col-xl-3 col-xxl-3 col-sm-4 col-lg-4 mb-3">
        <div class="card p-4 h-100" data-bs-toggle="modal" data-bs-target="#indicador8">
            <div class="card-header text-white">
                <h5 class="card-title">Indicador 8</h5>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Diferenciar si son Proyectos, charlas o talleres
                </p>
            </div>
        </div>
    </div>

    <div class="col-md-4 col-xl-3 col-xxl-3 col-sm-4 col-lg-4 mb-3">
        <div class="card p-4 h-100" data-bs-toggle="modal" data-bs-target="#indicador9">
            <div class="card-header text-white">
                <h5 class="card-title">Indicador 9</h5>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Cada ODS, y por lo tanto cada proyecto, charla, etc, está vinculada a una dimensión
                </p>
            </div>
        </div>
    </div>

    <!--Columna 3-->
    <div class="col-md-4 col-xl-3 col-xxl-3 col-sm-4 col-lg-4 mb-3">
        <div class="card p-4 h-100" data-bs-toggle="modal" data-bs-target="#indicador10">
            <div class="card-header text-white">
                <h5 class="card-title">Indicador 10</h5>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Personas que han sido responsables de las iniciativas, proyectos, etc.
                </p>
            </div>
        </div>
    </div>
    <div class="col-md-4 col-xl-3 col-xxl-3 col-sm-4 col-lg-4 mb-3">
        <div class="card p-4 h-100" data-bs-toggle="modal" data-bs-target="#indicador11">
            <div class="card-header text-white">
                <h5 class="card-title">Indicador 11</h5>
            </div>
            <div class="card-body">
                <p class="card-text">
                    De las acciones realizadas cuales son nuevas, innovadoras o que han hecho alguna modificación
                    importante
                </p>
            </div>
        </div>
    </div>
    <div class="col-md-4 col-xl-3 col-xxl-3 col-sm-4 col-lg-4 mb-3">
        <div class="card p-4 h-100" data-bs-toggle="modal" data-bs-target="#indicador12">
            <div class="card-header text-white">
                <h5 class="card-title">Indicador 12</h5>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Cuánto tiempo se ha dedicado a cada acción
                </p>
            </div>
        </div>
    </div>

    <div class="col-md-4 col-xl-3 col-xxl-3 col-sm-4 col-lg-4 mb-3 align-content-center">
        <div class="card p-4 h-100" data-bs-toggle="modal" data-bs-target="#indicador13">
            <div class="card-header text-white">
                <h5 class="card-title">Indicador 13</h5>
            </div>
            <div class="card-body">
                <p class="card-text">
                    Si esas acciones o proyectos han requerido de alguna visita, salida, charla, etc.
                </p>
            </div>
        </div>
    </div>
</div>

<!--Modals-->
<!--Modal 1-->
<!--TODO: Todavia está en pruebas y lógica-->
<div class="modal fade" id="indicador1" tabindex="-1" aria-labelledby="indicador1ModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header text-white">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Indicador 1</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <h6 class="fw-bold">Qué iniciativas se han realizado dirigidas a los ODS por curso académico:</h6>

                    <canvas baseChart
                        [data]="barChartData"
                        [options]="barChartOptions"
                        [plugins]="barChartPlugins"
                        [legend]="barChartLegend"
                        [type]="'bar'">
                    </canvas>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!--Modal 2-->
<div class="modal fade" id="indicador2" tabindex="-1" aria-labelledby="indicador2ModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header text-white">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Indicador 2</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <h6 class="fw-bold">Cantidad de iniciativas:</h6>
                      <h1>{{ getIndicador2() }}</h1>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!--Modal 3-->
<!--TODO: Ordenar por curso-->
<div class="modal fade" id="indicador3" tabindex="-1" aria-labelledby="indicador3ModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header text-white">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Indicador 3</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="card-title">
                    <h6 class="fw-bold">En qué ciclo se han realizado las iniciativas, proyectos, y en los ciclos qué
                        módulos han intervenido</h6>
                </div>
                <canvas baseChart
                    [data]="barChartData"
                    [options]="barChartOptions"
                    [plugins]="barChartPlugins"
                    [legend]="barChartLegend"
                    [type]="'bar'">
                </canvas>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!--Modal 4-->
<div class="modal fade" id="indicador4" tabindex="-1" aria-labelledby="indicador4ModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header text-white">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Indicador 4</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="card-title">
                    <h6 class="fw-bold">En qué consiste cada acción, proyecto, iniciativa y si hay un producto final
                    </h6>
                </div>
                <table class="table table-bordered table-striped">
                    <thead class="bg-primary text-white">
                        <tr>
                            <th>Acción</th>
                            <th>Iniciativa</th>
                            <th>Producto Final</th>
                        </tr>
                    </thead>
                    <tbody>
                        @for (iniciativa of iniciativasFiltradas; track $index) {
                        <tr>

                            <td><i class="bi bi-check-circle me-1"></i>{{iniciativa.nombre}}</td>
                            <td><i class="bi bi-globe2 me-1"></i>{{iniciativa.tipo}}</td>
                            @if (iniciativa.explicacion != '') {
                            <td><i class="bi bi-check-circle me-1"></i>Si: {{iniciativa.explicacion}}</td>
                            }@else {
                            <td><i class="bi bi-globe2 me-1"></i>No</td>
                            }
                        </tr>
                        }
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!--Modal 5-->
<div class="modal fade" id="indicador5" tabindex="-1" aria-labelledby="indicador5ModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header text-white">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Indicador 5</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="card-title">
                    <h6 class="fw-bold">A qué ODS va dirigida cada acción y dentro de cada ODS a qué metas concretas
                    </h6>
                </div>
                <table class="table table-bordered table-striped">
                    <thead class="bg-primary text-white">
                        <tr>
                            <th>ODSs</th>
                            <th>Metas</th>
                        </tr>
                    </thead>
                    <tbody>
                        @for (meta of metas; track $index) {
                        <tr>

                            <td><i class="bi bi-check-circle me-1"></i>{{meta.ods.nombre}}</td>
                            <td><i class="bi bi-globe2 me-1"></i>{{meta.descripcion}}</td>
                        </tr>
                        }
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!--Modal 6-->
<div class="modal fade" id="indicador6" tabindex="-1" aria-labelledby="indicador6ModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header text-white">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Indicador 6</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="card-title">
                    <h6 class="fw-bold">Si en la realización del proyecto, acción ha colaborado alguna entidad externa
                    </h6>
                </div>

                <canvas baseChart
                    [data]="barChartData"
                    [options]="barChartOptions"
                    [plugins]="barChartPlugins"
                    [legend]="barChartLegend"
                    [type]="'bar'">
                </canvas>
                <!-- <table class="table table-bordered table-striped">
                    <thead class="bg-primary text-white">
                        <tr>
                            <th>ODSs</th>
                            <th>Metas</th>
                        </tr>
                    </thead>
                    <tbody>
                        @for (ini of iniciativasFiltradas; track $index) {
                        <tr>

                            <td><i class="bi bi-check-circle me-1"></i>{{ini.nombre}}</td>

                            @if (ini.entidades_externas.length > 0) {
                                @if (ini.entidades_externas.length == 1) {
                                    <td><i class="bi bi-globe2 me-1"></i>Ha participado {{ini.entidades_externas.length}} entidad</td>
                                }@else {
                                    <td><i class="bi bi-globe2 me-1"></i>Han participado {{ini.entidades_externas.length}} entidades</td>
                                }
                            }@else {
                                <td><i class="bi bi-globe2 me-1"></i>No ha participado ninguna entidad</td>
                            }
                        </tr>
                        }
                    </tbody>
                </table> -->

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!--Modal 7-->
<div class="modal fade" id="indicador7" tabindex="-1" aria-labelledby="indicador7ModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header text-white">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Indicador 7</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="card-title">
                    <h6 class="fw-bold">Si las acciones, proyectos se han difundido</h6>
                </div>
                <table class="table table-bordered table-striped">
                    <thead class="bg-primary text-white">
                        <tr>
                            <th>ODSs</th>
                            <th>Metas</th>
                        </tr>
                    </thead>
                    <tbody>
                        @for (ini of iniciativasFiltradas; track $index) {
                        <tr>

                            <td><i class="bi bi-check-circle me-1"></i>{{ini.nombre}}</td>

                            @if (ini.redes_sociales.length > 0) {
                            @if (ini.redes_sociales.length == 1) {
                            <td><i class="bi bi-globe2 me-1"></i>Se ha difundido por {{ini.redes_sociales.length}} red
                                social</td>
                            }@else {
                            <td><i class="bi bi-globe2 me-1"></i>Se ha difundido por {{ini.redes_sociales.length}} red
                                social</td>
                            }
                            }@else {
                            <td><i class="bi bi-globe2 me-1"></i>No se ha difundido por ninguna red social</td>
                            }
                        </tr>
                        }
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!--Modal 8-->
<div class="modal fade" id="indicador8" tabindex="-1" aria-labelledby="indicador8ModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header text-white">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Indicador 8</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="card-title">
                    <h6 class="fw-bold">Diferenciar si son Proyectos, charlas o talleres</h6>
                </div>
                <!--TODO-->
                <p>TODO</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!--Modal 9-->
<div class="modal fade" id="indicador9" tabindex="-1" aria-labelledby="indicador9ModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header text-white">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Indicador 9</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="card-title">
                    <h6 class="fw-bold">Cada ODS, y por lo tanto cada proyecto, charla, etc, está vinculada a una
                        dimensión</h6>
                </div>
                <!--TODO-->
                <p>TODO</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!--Modal 10-->
<div class="modal fade" id="indicador10" tabindex="-1" aria-labelledby="indicador10ModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header text-white">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Indicador 10</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="card-title">
                    <h6 class="fw-bold">Personas que han sido responsables de las iniciativas, proyectos, etc.</h6>
                </div>
                <!--TODO-->
                <p>TODO</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!--Modal 11-->
<div class="modal fade" id="indicador11" tabindex="-1" aria-labelledby="indicador11ModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header text-white">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Indicador 11</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="card-title">
                    <h6 class="fw-bold">De las acciones realizadas cuales son nuevas, innovadoras o que han hecho alguna
                        modificación
                        importante</h6>
                </div>
                <!--TODO-->
                <p>TODO</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!--Modal 12-->
<div class="modal fade" id="indicador12" tabindex="-1" aria-labelledby="indicador12ModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header text-white">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Indicador 12</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="card-title">
                    <h6 class="fw-bold">Cuánto tiempo se ha dedicado a cada acción</h6>
                </div>
                <!--TODO-->
                <p>TODO</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!--Modal 13-->
<div class="modal fade" id="indicador13" tabindex="-1" aria-labelledby="indicador13ModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header text-white">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Indicador 13</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="card-title">
                    <h6 class="fw-bold">Si esas acciones o proyectos han requerido de alguna visita, salida, charla,
                        etc.</h6>
                </div>
                <!--TODO-->
                <p>TODO</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>